/* ============================
   Reports.css
   ============================ */

.reports-container {
  display: grid;
  grid-template-rows: auto auto 1fr auto;
  height: calc(100dvh - 35px);
  overflow: hidden;

  padding: var(--space-2);
  gap: var(--space-2, 0.55rem);
  color: var(--text-primary, #f5fbff);
  background: var(--bg-base, #000309);

  /* keep overall UI small by default */
  font-size: var(--font-size-xs, 0.78rem);
}

/* ---- Controls bar ---- */
.reports-controls {
  display: flex;
  align-items: center;
  justify-content: flex-start;                 /* push content left */
  gap: var(--space-2, 0.25rem);               /* tighter gap */
  background: var(--bg-card, rgba(2,4,8,0.992));
  border: 1px solid var(--border-color, rgba(255,255,255,0.22));
  border-radius: var(--radius-lg, 8px);
  padding: var(--space-2, 0.20rem) var(--space-2, 0.40rem); /* smaller padding */
  box-shadow: var(--shadow-md, 0 6px 26px rgba(0,0,0,.44));
}

.reports-controls-left,
.reports-controls-right {
  display: flex;
  align-items: center;
  gap: var(--space-2, 0.25rem);
}

/* keep Search button docked at right edge */
.reports-controls-right { margin-left: auto; }

/* meta row (total results) */
.reports-meta {
  display: flex;
  align-items: center;
  justify-content: flex-start;
  color: var(--text-muted, #a9b9cf);
  font-size: var(--font-size-xs, 0.78rem);
  padding: 0 var(--space-1, 0.2rem);
}

.reports-total { opacity: 0.9; }

/* ---- Input & Select (exact same visual size) ---- */
.reports-input,
.reports-select {
  box-sizing: border-box;
  width: 100%;
  padding: var(--space-2, 0.20rem) var(--space-3, 0.40rem); /* smaller padding */
  font-size: var(--font-size-xs, 0.78rem);                   /* small text */
  line-height: 1.1;                                          /* consistent height */
  background: var(--bg-card-2, rgba(4,7,12,0.988));
  color: var(--text-primary, #f5fbff);
  border: 1px solid var(--border-color, rgba(255,255,255,0.22));
  border-radius: var(--radius, 6px);
  transition: border-color var(--transition-fast, 140ms ease),
              background var(--transition-fast, 140ms ease);
}

/* input lives inside the flex wrapper (keeps your layout) */
.reports-input-wrap { position: relative; flex: 1 1 420px; }
.reports-input { width: 100%; }

/* keep select compact; adjust if you want wider */
.reports-select { min-width: 200px; }

/* shared hover/focus states */
.reports-input:hover,
.reports-select:hover { border-color: var(--text-secondary, #e3efff); }

.reports-input:focus,
.reports-select:focus {
  outline: none;
  border-color: var(--color-primary, #19d9ff);
  background: var(--bg-card, rgba(2,4,8,0.992));
}

/* Normalize native select + add lightweight caret */
.reports-select {
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;

  /* reserve tiny space for caret without changing overall height */
  padding-right: calc(var(--space-2, 0.40rem) + 14px);

  background-image:
    linear-gradient(45deg, transparent 50%, currentColor 50%),
    linear-gradient(135deg, currentColor 50%, transparent 50%);
  background-position:
    right calc(var(--space-2, 0.40rem) + 5px) center,
    right var(--space-2, 0.40rem) center;
  background-size: 5px 5px, 5px 5px;
  background-repeat: no-repeat;
}

/* hide old IE arrow if needed */
.reports-select::-ms-expand { display: none; }

/* ---- Buttons (compact) ---- */
.reports-btn {
  display: inline-flex;
  align-items: center;
  gap: var(--space-1, 0.20rem);
  padding: var(--space-2, 0.20rem) var(--space-2, 0.40rem); /* smaller */
  background: var(--bg-card-2, rgba(4,7,12,0.988));
  color: var(--text-secondary, #e3efff);
  border: 1px solid var(--border-color, rgba(255,255,255,0.22));
  border-radius: var(--radius, 6px);
  font-size: var(--font-size-xs, 0.78rem);                  /* small */
  cursor: pointer;
  transition: transform var(--transition-fast, 140ms ease),
              border-color var(--transition-fast, 140ms ease),
              background var(--transition-fast, 140ms ease),
              opacity var(--transition-fast, 140ms ease);
  height: 22px;
}
.reports-btn:hover {
  transform: translateY(-1px);
  border-color: var(--text-secondary, #e3efff);
  background: var(--bg-hover, rgba(0,212,255,0.05));
}
.reports-btn:disabled { opacity: .55; cursor: not-allowed; transform: none; }
.reports-primary {
  background: linear-gradient(180deg, rgba(25, 217, 255, 0.10), rgba(25, 217, 255, 0.04));
  border-color: rgba(25, 217, 255, 0.35);
  color: var(--text-primary, #f5fbff);
}
.reports-primary:hover {
  background: linear-gradient(180deg, rgba(25, 217, 255, 0.16), rgba(25, 217, 255, 0.08));
  border-color: rgba(25, 217, 255, 0.55);
}

/* Icon-only buttons (smaller) */
.reports-icon-btn {
  width: 22px;   /* was 28 */
  height: 22px;  /* was 28 */
  display: grid;
  place-items: center;
  border-radius: 5px;
  background: var(--bg-card-2, rgba(4,7,12,0.988));
  border: 1px solid var(--border-color, rgba(255,255,255,0.18));
  color: var(--text-secondary, #e3efff);
  cursor: pointer;
  transition: transform var(--transition-fast, 140ms ease),
              border-color var(--transition-fast, 140ms ease),
              background var(--transition-fast, 140ms ease),
              opacity var(--transition-fast, 140ms ease);
}
.reports-icon-btn:hover {
  transform: translateY(-1px);
  border-color: var(--text-secondary, #e3efff);
  background: var(--bg-hover, rgba(0,212,255,0.06));
}

/* ---- Loading / Empty ---- */
.reports-loading,
.reports-empty {
  display: grid;
  place-items: center;
  padding: var(--space-8, 1.10rem);
  color: var(--text-muted, #a9b9cf);
  background: var(--bg-card, rgba(2,4,8,0.992));
  border: 1px dashed var(--border-color, rgba(255,255,255,0.22));
  border-radius: var(--radius-lg, 8px);
}

/* ---- Scrollable results area ---- */
.reports-results {
  min-height: 0;   /* allow it to shrink inside the grid */
  height: 100%;    /* TAKE the whole 1fr track */
  overflow: auto;  /* this is the ONLY scroller */
  -webkit-overflow-scrolling: touch;
}

/* Grid */
.reports-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(520px, 1fr));
  gap: var(--space-2, 0.25rem);
  align-content: start;
}
@media (max-width: 700px) { .reports-grid { grid-template-columns: 1fr; } }

/* Card */
.reports-card { contain: layout paint; }
.reports-card {
  background: var(--bg-card, rgba(2,4,8,0.992));
  border: 1px solid var(--border-color, rgba(255,255,255,0.22));
  border-radius: var(--radius, 6px);
  box-shadow: none;
  padding: var(--space-2, 0.25rem) var(--space-4, 0.55rem);
  transition: background var(--transition-fast, 140ms ease), border-color var(--transition-fast, 140ms ease);
}
.reports-card:hover {
  background: var(--bg-hover, rgba(0,212,255,0.05));
  border-color: rgba(255,255,255,0.28);
}

/* Row layout */
.reports-row {
  display: grid;
  grid-template-columns: 1fr auto;
  align-items: flex-start;
  gap: var(--space-3, 0.4rem);
}

/* Left: icon + title + snippet */
.reports-left {
  display: grid;
  grid-template-columns: auto 1fr;
  align-items: start;
  gap: var(--space-3, 0.4rem);
  min-width: 0; /* let title/snippet ellipsis work */
}
.reports-icon { font-size: 1rem; margin-top: 2px; color: var(--color-primary, #19d9ff); }
.reports-title-col { min-width: 0; }
.reports-title-line {
  font-weight: 600;
  color: var(--text-secondary, #e3efff);
  font-size: var(--font-size-xs, 0.78rem); /* small title */
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.reports-snippet {
  margin-top: 2px;
  font-size: var(--font-size-xs, 0.78rem);
  color: var(--text-muted, #a9b9cf);
  line-height: 1.35;
  overflow: hidden;
  display: -webkit-box;
  -webkit-line-clamp: 2; /* clamp to 2 lines */
  -webkit-box-orient: vertical;
}
.reports-snippet mark {
  background: rgba(25, 217, 255, 0.22);
  color: var(--text-primary, #f5fbff);
  padding: 0 2px;
  border-radius: 3px;
}

/* Right: actions */
.reports-actions-row {
  display: inline-flex;
  gap: var(--space-2, 0.25rem);
}

/* ---- Multi-Peek Panel ---- */
.reports-peek {
  margin-top: var(--space-2, 0.25rem);
  margin-bottom: var(--space-2, 0.25rem);
  border-top: 1px dashed var(--border-color, rgba(255,255,255,0.16));
  padding-top: var(--space-2, 0.25rem);
}

.reports-peek-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-2, 0.25rem);
  margin-bottom: var(--space-2, 0.2rem);
}

.reports-badge {
  display: inline-flex;
  align-items: center;
  padding: 2px 6px;
  border-radius: 999px;
  border: 1px solid var(--border-color, rgba(255,255,255,0.22));
  background: var(--bg-card-2, rgba(4,7,12,0.988));
  color: var(--text-secondary, #e3efff);
  font-size: var(--font-size-xs, 0.78rem);
}

.reports-peek-body {
  /* scrollable, small text */
  max-height: 320px;
  overflow: auto;
  padding-right: var(--space-4); /* tiny gutter for scrollbar */
}

.reports-peek-title {
  font-size: var(--font-size-xs, 0.78rem);
}

.reports-peek-list {
  margin: 0;
  padding-left: 1.1rem;
  display: grid;
  gap: 8px;
}

.reports-peek-item {
  list-style: decimal;
  font-size: var(--font-size-xs, 0.78rem);
}

.reports-peek-html {
  line-height: 1.42;
  color: var(--text-secondary, #d9e7ff);
}
.reports-peek-html mark {
  background: rgba(25, 217, 255, 0.22);
  color: var(--text-primary, #f5fbff);
  padding: 0 2px;
  border-radius: 3px;
}
.reports-peek-html .sep {
  display: block;
  opacity: 0.55;
  margin: 6px 0;
}

.reports-peek-loading,
.reports-peek-error,
.reports-peek-empty {
  color: var(--text-muted, #a9b9cf);
  font-size: var(--font-size-xs, 0.78rem);
}

.reports-peek-footer {
  margin-top: var(--space-3, 0.25rem);
  display: flex;
  justify-content: flex-end;
  gap: var(--space-2, 0.25rem);
}

/* ---- Pager ---- */
.reports-pager {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-3, 0.4rem);
  padding: var(--space-3, 0.4rem);
  background: var(--bg-card, rgba(2,4,8,0.992));
  border: 1px solid var(--border-color, rgba(255,255,255,0.22));
  border-radius: var(--radius-lg, 8px);
  box-shadow: var(--shadow-md, 0 6px 26px rgba(0,0,0,.44));
}
.reports-page-indicator {
  color: var(--text-muted, #a9b9cf);
  font-size: var(--font-size-sm, 0.84rem);
}

/* ---- Modal viewer ---- */
.reports-modal {
  position: fixed;
  inset: 0;
  z-index: 100000;
  display: grid;
  place-items: center;
}
.reports-modal::before {
  content: "";
  position: absolute;
  inset: 0;
  z-index: 0;
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  background: rgba(0, 0, 0, 0.45);
}
body.reports-modal-open { overflow: hidden; }
.reports-modal-content {
  z-index: 1;
  width: 100vw;
  height: 100vh;
  display: grid;
  grid-template-rows: auto 1fr;
  background: #0f131a;
  border: none;
  border-radius: 0;
  box-shadow: none;
  overflow: hidden;
  position: relative;
}
.reports-modal-close {
  position: absolute;
  top: var(--space-3, 0.4rem);
  right: var(--space-3, 0.4rem);
  width: 40px;
  height: 40px;
  display: grid;
  place-items: center;
  border-radius: var(--radius, 6px);
  background: rgba(0,0,0,0.45);
  border: 1px solid rgba(255,255,255,0.25);
  color: #fff;
  cursor: pointer;
  z-index: 2;
  transition: transform var(--transition-fast, 140ms ease), opacity var(--transition-fast, 140ms ease);
}
.reports-modal-close:hover { transform: translateY(-1px); }
.reports-modal-bar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-3, 0.4rem);
  padding: var(--space-3, 0.4rem) calc(var(--space-6, 0.85rem) + 28px) var(--space-3, 0.4rem) var(--space-4, 0.55rem);
  background: rgba(0,0,0,0.35);
  color: #fff;
  border: none;
}
.reports-title {
  font-weight: 600;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.reports-pdf-wrap { position: relative; min-height: 0; overflow: auto; background: #111; padding: 0; }
.reports-pdf-iframe { display: block; width: 100%; height: 100%; border: 0; background: #111; }
.reports-pdf-loading, .reports-pdf-error { display: grid; place-items: center; height: 100%; color: #ddd; font-size: var(--font-size-sm, 0.84rem); }

/* ---- Responsive ---- */
@media (max-width: 820px) {
  .reports-controls { flex-direction: column; align-items: stretch; }
  .reports-controls-left, .reports-controls-right { width: 100%; }
  .reports-controls-right { justify-content: flex-end; margin-left: 0; }
}

/* ============================
   Nicer scrollbars (WebKit + Firefox)
   ============================ */

/* WebKit (Chrome, Edge, Safari, Opera) */
.reports-results,
.reports-peek-body,
body {
  /* Firefox */
  scrollbar-width: thin;
  scrollbar-color: rgba(255,255,255,0.35) transparent;
}

/* WebKit track & thumb */
.reports-results::-webkit-scrollbar,
.reports-peek-body::-webkit-scrollbar,
body::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

.reports-results::-webkit-scrollbar-track,
.reports-peek-body::-webkit-scrollbar-track,
body::-webkit-scrollbar-track {
  background: transparent; /* lets bg show through */
}

.reports-results::-webkit-scrollbar-thumb,
.reports-peek-body::-webkit-scrollbar-thumb,
body::-webkit-scrollbar-thumb {
  background: rgba(255,255,255,0.18);
  border-radius: 8px;
  border: 2px solid transparent;        /* inner gutter */
  background-clip: padding-box;          /* keeps thumb slim */
  transition: background 140ms ease, opacity 140ms ease;
}

.reports-results::-webkit-scrollbar-thumb:hover,
.reports-peek-body::-webkit-scrollbar-thumb:hover,
body::-webkit-scrollbar-thumb:hover {
  background: rgba(255,255,255,0.28);
}

.reports-results::-webkit-scrollbar-corner,
.reports-peek-body::-webkit-scrollbar-corner,
body::-webkit-scrollbar-corner {
  background: transparent;
}

/* Light mode tweaks: darker thumb for contrast */
:root[data-theme="light"] .reports-results,
:root[data-theme="light"] .reports-peek-body,
:root[data-theme="light"] body {
  scrollbar-color: rgba(12,18,32,0.35) transparent;
}

:root[data-theme="light"] .reports-results::-webkit-scrollbar-thumb,
:root[data-theme="light"] .reports-peek-body::-webkit-scrollbar-thumb,
:root[data-theme="light"] body::-webkit-scrollbar-thumb {
  background: rgba(12,18,32,0.22);
}

:root[data-theme="light"] .reports-results::-webkit-scrollbar-thumb:hover,
:root[data-theme="light"] .reports-peek-body::-webkit-scrollbar-thumb:hover,
:root[data-theme="light"] body::-webkit-scrollbar-thumb:hover {
  background: rgba(12,18,32,0.34);
}

/* Optional: slightly inset the thumb inside panel borders */
.reports-peek-body {
  padding-right: var(--space-4); /* you already have this, keeps text clear of scrollbar */
}

/* Note: PDF viewer scrollbars inside the <iframe> are browser-controlled,
   so they can’t be themed from this CSS. */
