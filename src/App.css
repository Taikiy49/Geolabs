/* ==========================
   App.css â€” Civil (burnt orange) theme + full-height layout
   ========================== */

/* ==========================
   Design tokens (:root)
   ========================== */
:root {
  /* Spacing */
  --space-1: 0.125rem;
  --space-2: 0.25rem;
  --space-3: 0.375rem;
  --space-4: 0.5rem;
  --space-5: 0.75rem;
  --space-6: 0.875rem;
  --space-8: 1rem;
  --space-10: 1.25rem;
  --space-12: 1.5rem;

  /* Type scale */
  --font-size-xl: 1.25rem;
  --font-size-lg: 1rem;
  --font-size-base: 0.875rem;
  --font-size-sm: 0.78rem;
  --font-size-xs: 0.72rem;
  --font-size-xxs: 0.64rem;

  /* Radii */
  --radius: 2px;
  --radius-lg: 4px;

  /* Layout defaults */
  --card-pad: var(--space-6);
  --grid-gap: var(--space-4);
  --main-pad: var(--space-4);

  /* ===== Light palette (burnt-orange / civil) ===== */
  /* Surfaces (warmed) */
  --bg-page: #efe7dc;    /* warm page backdrop */
  --bg-base: #f5f1ea;    /* app base */
  --bg-card: #fffaf3;    /* cards/sidebar: soft parchment */
  --bg-card-2: #f2ebe2;  /* secondary card */
  --bg-hover: rgba(195, 90, 0, 0.10); /* orange wash for hovers */

  /* Header & Sidebar gradient (if used) */
  --header-bg: linear-gradient(90deg, #b64900 0%, #d96600 100%);
  --sidebar-bg: linear-gradient(180deg, #b64900 0%, #9a4100 100%);

  /* Text */
  --text-primary:   #0c1a33;
  --text-secondary: #243654;
  --text-muted:     #6a7a96;

  /* Accents (orange-forward) */
  --color-primary:   #c35a00; /* burnt orange */
  --color-secondary: #e07200; /* bright orange */
  --color-cerulean:  #c35a00; /* alias to primary */
  --color-violet:    #6d5cff;
  --color-mint:      #00bfa6;
  --color-amber:     #f59e0b;
  --color-rose:      #e84855;
  --color-lime:      #69c943;
  --color-cyan:      #24b9d7;
  --color-fuchsia:   #b64b8e;

  /* Status aliases */
  --color-success:   #0aa66e;
  --color-warning:   #f59e0b;
  --color-danger:    #e84855;

  /* Icons on colored headers/sidebars */
  --icon-on-sidebar: #ffffff;
  --icon-on-header:  #ffffff;

  /* Borders & shadows (warmer border tint) */
  --border-color: rgba(64, 40, 16, 0.12);
  --shadow-surface: 0 1px 3px rgba(16,24,40,.06), 0 1px 2px rgba(16,24,40,.04);
  --shadow-float:   0 10px 24px rgba(16,24,40,.14), 0 3px 8px rgba(16,24,40,.10);

  /* Motion */
  --transition-fast:   140ms ease;
  --transition-normal: 220ms ease;

  /* Misc */
  --focus-ring: 2px solid var(--color-primary);
  --text-line-height: 1.35;
  --text-letter-spacing: normal;
  --text-weight: 400;

  /* Sidebar widths */
  --sidebar-width: 130px;
  --sidebar-width-collapsed: 80px;
  --sidebar-w: var(--sidebar-width);
}

/* ==========================
   Minimal reset + base
   ========================== */
*,
*::before,
*::after { box-sizing: border-box; }

* { margin: 0; padding: 0; }

/* Full-height canvas */
html, body, #root { height: 100%; min-height: 100vh; min-height: 100dvh; }

html { -webkit-text-size-adjust: 100%; }

body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background: var(--bg-base, #f5f1ea);
  color: var(--text-primary, #0c1a33);
  overflow-x: hidden; /* vertical overflow handled by .app-main */
}

/* Root container flex column */
#root {
  display: flex;
  flex-direction: column;
}

:focus-visible { outline: 2px solid var(--color-primary, #c35a00); outline-offset: 2px; }

::selection { background: rgba(195, 90, 0, 0.25); color: #000; }

a {
  color: var(--color-primary);
  text-decoration: none;
  transition: color var(--transition-fast);
}
a:hover { text-decoration: underline; }

/* ==========================
   Loading helpers
   ========================== */
.loading {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: var(--space-8);
  color: var(--text-muted);
}

.spinner {
  width: 20px; height: 20px;
  border: 2px solid rgba(195, 90, 0, 0.20);
  border-top: 2px solid var(--color-primary);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }

@media (prefers-reduced-motion: reduce) {
  * { transition: none !important; animation: none !important; }
}

/* ==========================
   Auth redirect UI
   ========================== */
.auth-redirect {
  min-height: calc(100dvh - 64px);
  display: grid;
  place-items: center;
  padding: var(--space-10);
  background: var(--bg-page);
}

.auth-card {
  width: min(720px, 92vw);
  background: var(--bg-card);
  color: var(--text-primary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-float);
  padding: clamp(1.25rem, 2.5vw, 2rem);
  text-align: center;
}

.auth-logo { height: 44px; width: auto; margin-bottom: var(--space-6); filter: drop-shadow(0 1px 0 rgba(0,0,0,.05)); }

.auth-title {
  margin: 0 0 var(--space-3);
  font-size: 1.35rem;
  font-weight: 600;
  letter-spacing: 0.2px;
  color: var(--text-secondary);
}
.auth-sub { margin: 0 0 var(--space-6); color: var(--text-muted); font-size: var(--font-size-sm); }

.auth-spinner {
  width: 28px; height: 28px; margin: 0 auto var(--space-6);
  border: 3px solid rgba(230, 120, 0, .18);
  border-top: 3px solid var(--color-primary);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

.auth-hint { margin: 0 0 var(--space-4); color: var(--text-muted); font-size: var(--font-size-sm); }

.auth-actions {
  display: flex; gap: var(--space-4);
  justify-content: center; flex-wrap: wrap;
  margin-bottom: var(--space-6);
}

.hlite-btn {
  background: var(--color-primary);
  color: #fff;
  border: none;
  border-radius: 6px;
  padding: 0.55rem 0.85rem;
  cursor: pointer;
}
.hlite-btn:hover { filter: brightness(1.05); }

.hlite-btn.ghost {
  background: transparent; color: var(--text-secondary);
  border: 1px solid var(--border-color);
  transition: background var(--transition-fast), border-color var(--transition-fast), transform var(--transition-fast);
}
.hlite-btn.ghost:hover { background: var(--bg-hover); transform: translateY(-1px); }

.auth-footnote {
  color: var(--text-muted);
  font-size: var(--font-size-xs);
  border-top: 1px dashed var(--border-color);
  padding-top: var(--space-4);
}

/* ==========================
   Nice global scrollbars
   ========================== */
* { scrollbar-width: thin; scrollbar-color: rgba(12,18,32,0.35) transparent; }
*::-webkit-scrollbar { width: 8px; height: 8px; }
*::-webkit-scrollbar-track { background: transparent; }
*::-webkit-scrollbar-thumb {
  background: rgba(12,18,32,0.22);
  border-radius: 8px;
  border: 2px solid transparent;
  background-clip: padding-box;
  transition: background var(--transition-fast), opacity var(--transition-fast);
}
*::-webkit-scrollbar-thumb:hover { background: rgba(12,18,32,0.34); }

/* ==========================
   App layout (Header + Sidebar + Main)
   ========================== */

/* App root fills viewport; .app-layout will fill remaining height under any header */
.App {
  min-height: 100%;
  min-height: 100dvh;
  display: flex;
  flex-direction: column;
  background: var(--bg-base);
}

/* Two-column app body under header (if any). This grid consumes the leftover height */
.app-layout {
  flex: 1 1 auto;                /* fill remaining vertical space */
  min-height: 0;                 /* allow children to shrink/scroll */
  display: grid;
  grid-template-columns: var(--sidebar-w) minmax(0, 1fr);
  background: var(--bg-base);
}

/* Ensure the Sidebar never stretches to full width */
.app-layout > .sb {
  width: var(--sidebar-w);
  flex: 0 0 var(--sidebar-w);
}

/* ONE TRUE SCROLL CONTAINER: main content column */
.app-main {
  min-width: 0;
  min-height: 0;                 /* critical so inner scrollers work */
  background: var(--bg-base);
  overflow: hidden;
}

/* Responsive: single column under 860px */
@media (max-width: 860px) {
  .app-layout { grid-template-columns: 1fr; }
}

/* ==========================================
   No-rounded-corners + overflow safety (fix)
   ========================================== */
html, body, #root, .App, .app-layout, .app-main {
  border-radius: 0 !important;
  background: var(--bg-base);
}

/* Prevent last child outer margin from exposing background gap */
.app-main > :last-child { margin-bottom: 0; }

/* ==========================================
   Page-level helpers (e.g., AskAI page)
   ========================================== */

/* If a page needs full height inside .app-main */
.fill-parent {
  height: 100%;
  min-height: 0;
  overflow: hidden;
}

/* Example: AskAI root fills .app-main; its inner areas manage scroll */
.askai {
  height: 100%;
  min-height: 0;
  overflow: hidden;
}

/* iOS stable viewport units (optional) */
@supports (height: 100svh) {
  html, body, #root { min-height: 100svh; }
  .App { min-height: 100svh; }
}

